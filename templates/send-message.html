<!DOCTYPE html>
<html lang="fr">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulaire GET</title>
    <link rel="stylesheet" href="../static/styles.css">


</head>
<body>

    <div class="button-container">
        <a href="/msg" class="btn">Messages</a>
        <a href="/rappel" class="btn">Rappel RDV</a>
        <a href="/historique" class="btn">Historique</a>
    </div>

        <h2>Envoyer un message</h2>

    <form id="smsForm" action="/smg" method="POST">
        <label for="num">Numéro :</label>
        <input type="text" id="num" name="num" required pattern="^[0-9]{10}$" title="Le numéro doit contenir exactement 10 chiffres">
        <br>
        <label for="msg">Message :</label>
        <input type="text" id="msg" name="msg" required>
        <br>
        <button type="submit">Envoyer</button>
    </form>

    <script>
        document.getElementById("smsForm").addEventListener("submit", function(event) {
            let num = document.getElementById("num").value;
            let msg = document.getElementById("msg").value;

            // Vérification du numéro (exactement 10 chiffres)
            let numPattern = /^[0-9]{10}$/;
            if (!numPattern.test(num)) {
                alert("Le numéro doit contenir exactement 10 chiffres.");
                event.preventDefault();
                return;
            }

            // Vérification des caractères spéciaux interdits dans le message
            let msgPattern = /^[a-zA-Z0-9\s.,!?àçéèê'-]+$/; // Autorise lettres, chiffres, espace, ., !, ?, ', -
            if (!msgPattern.test(msg)) {
                alert("Le message contient des caractères interdits. Utilisez uniquement des lettres, chiffres et les symboles .,!?'-");
                event.preventDefault();
                return;
            }
        });
    </script>

    </body>
    </html>
